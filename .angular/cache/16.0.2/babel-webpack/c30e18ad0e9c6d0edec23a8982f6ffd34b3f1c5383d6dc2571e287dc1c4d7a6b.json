{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, signal } from '@angular/core';\nlet ViewComponent = class ViewComponent {\n  constructor(route, router, familyMemberService) {\n    this.route = route;\n    this.router = router;\n    this.familyMemberService = familyMemberService;\n    this.panelOpenState = signal(false);\n    this.isLoading = true; // Track the loading state\n  }\n\n  ngOnInit() {\n    // Retrieve the id from the route parameters\n    this.id = this.route.snapshot.paramMap.get('id');\n    this.loadData(this.id); // Call a method to load data based on the id\n  }\n\n  loadData(id) {\n    this.isLoading = true; // Show progress bar\n    this.familyMemberService.getFamilyByMemberId(id).subscribe({\n      next: data => {\n        this.familyMember = data;\n        this.isLoading = false;\n        //console.log(data);\n      },\n\n      error: e => {\n        console.error(e);\n        this.isLoading = false; // Hide progress bar on error\n      }\n    });\n  }\n\n  onEditMember(memberId) {\n    this.pageMode = 'edit';\n    // Navigate to the view component and pass the id\n    this.router.navigate(['/create-update-member', {\n      id: memberId,\n      pageMode: this.pageMode\n    }]);\n  }\n  onUpdateFamilyHead(memberId) {\n    this.familyMemberService.updateFamilyHead(memberId).subscribe({\n      next: res => {\n        console.log(res);\n        this.loadData(memberId);\n        //this.changeDetectorRef.markForCheck();\n      },\n\n      error: e => console.error(e)\n    });\n  }\n  onApproveStatus(memberId) {\n    this.familyMemberService.approveStatus(memberId).subscribe({\n      next: res => {\n        console.log(res);\n        this.loadData(memberId);\n        //this.changeDetectorRef.markForCheck();\n      },\n\n      error: e => console.error(e)\n    });\n  }\n  getAge(dateOfBirth) {\n    if (!dateOfBirth) {\n      return 0; // Handle undefined dates\n    }\n\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDifference = today.getMonth() - birthDate.getMonth();\n    if (monthDifference < 0 || monthDifference === 0 && today.getDate() < birthDate.getDate()) {\n      age--;\n    }\n    return age;\n  }\n};\nViewComponent = __decorate([Component({\n  selector: 'app-view',\n  templateUrl: './view.component.html',\n  //changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./view.component.css']\n})], ViewComponent);\nexport { ViewComponent };","map":{"version":3,"names":["Component","signal","ViewComponent","constructor","route","router","familyMemberService","panelOpenState","isLoading","ngOnInit","id","snapshot","paramMap","get","loadData","getFamilyByMemberId","subscribe","next","data","familyMember","error","e","console","onEditMember","memberId","pageMode","navigate","onUpdateFamilyHead","updateFamilyHead","res","log","onApproveStatus","approveStatus","getAge","dateOfBirth","today","Date","birthDate","age","getFullYear","monthDifference","getMonth","getDate","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/sanyamlodha/Personal/Samta/code/demo-heroku/demo-heroku-ui/demo-heroku-ui/src/app/view/view.component.ts"],"sourcesContent":["import { Component, Input, OnInit, ChangeDetectionStrategy, ChangeDetectorRef, signal } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FamilyMemberService } from 'src/app/services/familyMember.service';\nimport { FamilyMember } from 'src/app/models/FamilyMember.model';\n\n@Component({\n  selector: 'app-view',\n  templateUrl: './view.component.html',\n  //changeDetection: ChangeDetectionStrategy.OnPush,\n  styleUrls: ['./view.component.css']\n})\nexport class ViewComponent implements OnInit {\n  id!: string;\n  familyMember?: FamilyMember;\n  pageMode!: string;\n  submitted!: boolean;\n  readonly panelOpenState = signal(false);\n  isLoading = true;  // Track the loading state\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private familyMemberService: FamilyMemberService,\n    //private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    // Retrieve the id from the route parameters\n    this.id = this.route.snapshot.paramMap.get('id')!;\n    this.loadData(this.id); // Call a method to load data based on the id\n  }\n\n  loadData(id: string): void {\n    this.isLoading = true;  // Show progress bar\n    this.familyMemberService.getFamilyByMemberId(id).subscribe({\n      next: (data) => {\n        this.familyMember = data;\n        this.isLoading = false;\n        //console.log(data);\n      },\n      error: (e) => {\n        console.error(e);\n        this.isLoading = false;  // Hide progress bar on error\n      }\n    });\n  }\n\n  onEditMember(memberId: string) {\n    this.pageMode = 'edit';\n    // Navigate to the view component and pass the id\n    this.router.navigate(['/create-update-member', {id: memberId, pageMode: this.pageMode}]);\n  }\n\n  onUpdateFamilyHead(memberId: string){\n    this.familyMemberService.updateFamilyHead(memberId).subscribe({\n      next: (res) => {\n        console.log(res);\n        this.loadData(memberId);\n        //this.changeDetectorRef.markForCheck();\n      },\n      error: (e) => console.error(e)\n    });\n  }\n\n  onApproveStatus(memberId: string){\n    this.familyMemberService.approveStatus(memberId).subscribe({\n      next: (res) => {\n        console.log(res);\n        this.loadData(memberId);\n        //this.changeDetectorRef.markForCheck();\n      },\n      error: (e) => console.error(e)\n    });\n  }\n\n  getAge(dateOfBirth: string): number {\n    if (!dateOfBirth) {\n      return 0; // Handle undefined dates\n    }\n    const today = new Date();\n    const birthDate = new Date(dateOfBirth);\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const monthDifference = today.getMonth() - birthDate.getMonth();\n  \n    if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {\n      age--;\n    }\n  \n    return age;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
<div class="loading-container" *ngIf="isLoading">
    <!-- <mat-progress-bar mode="determinate" value="40"></mat-progress-bar> -->
    <!-- <mat-progress-bar mode="indeterminate"></mat-progress-bar> -->
    <mat-spinner></mat-spinner>
</div>
<mat-card appearance="raised" class="card-layout">
    <mat-card-content>
        <div class="single-line expand-width">
            <span class="font-color-primary"> <h2>Search Members</h2></span>
            <span class="add-family-style">
                <button mat-raised-button color="primary" class="primary-button-style" (click)="onAddNewFamily()">Add New Family</button>
            </span>
        </div>
        <div>
            <!-- <mat-form-field class="search-elments-style">
                <mat-label>First Name</mat-label>
                <input id="firstName" matInput placeholder="First Name" [(ngModel)]="familyMember.firstName">
            </mat-form-field>

            <mat-form-field class="search-elments-style">
                <mat-label>Last Name</mat-label>
                <input id="lastName" matInput placeholder="Last Name" [(ngModel)]="lastName">
            </mat-form-field>

            <mat-form-field class="search-elments-style">
                <mat-label>Father's Name</mat-label>
                <input id="fatherName" matInput placeholder="Father's Name" [(ngModel)]="fatherName">
            </mat-form-field>
            <br>
            <mat-form-field class="search-elments-style">
                <mat-label>Mobile#</mat-label>
                <input id="mobile" matInput maxlength="10" placeholder="Mobile#" [(ngModel)]="mobile" type="number">
            </mat-form-field>

            <mat-form-field class="search-elments-style">
                <mat-label>Area</mat-label>
                <input id="area" matInput placeholder="Area" [(ngModel)]="area">
            </mat-form-field> -->
            <br>
            <div>
                <button class="search-elments-button-style" mat-raised-button color="secondary" (click)="onSearch()" type="submit">Search All</button>
            </div>
        </div>
       
        <div>
            <mat-form-field class="filter-style">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Jain" #input>
            </mat-form-field>
        </div>

        <div class="mat-elevation-z8">
            <div class="table-layout">
                <table class="table-style" mat-table [dataSource]="dataSource" matSort>
                    <ng-container matColumnDef="actions" class="actions-dropdown-style" sticky>
                        <th class="font-color-primary" mat-header-cell *matHeaderCellDef> Actions </th>
                        <td class="actions-dropdown-style font-color-primary" mat-cell *matCellDef="let row">
                            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
                            <mat-icon>more_vert</mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item>
                                    <mat-icon>visibility</mat-icon>
                                    <span (click)="onViewDetails(row.memberId)">View Details</span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon>add</mat-icon>
                                    <span (click)="onAddNewMember(row.memberId)">Add Member</span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon>edit</mat-icon>
                                    <span (click)="onEditMember(row.memberId)">Modify</span>
                                </button>
                            </mat-menu>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="firstName">
                        <th class="font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
                        <td mat-cell *matCellDef="let row"> {{row.firstName}} {{row.lastName}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="fatherName">
                        <th class="table-header font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Father's Name </th>
                        <td mat-cell *matCellDef="let row"> {{row.fatherName}} </td>
                    </ng-container>

                    <ng-container matColumnDef="mobile">
                        <th class="table-header font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Primary Number </th>
                        <td mat-cell *matCellDef="let row"> {{row.mobile}} </td>
                    </ng-container>

                    <ng-container matColumnDef="area">
                        <th class="font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Area </th>
                        <td mat-cell *matCellDef="let row"> {{row.area}} </td>
                    </ng-container>

                    <ng-container matColumnDef="profession">
                        <th class="font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Profession </th>
                        <td mat-cell *matCellDef="let row"> {{row.profession}} </td>
                    </ng-container>

                    <ng-container matColumnDef="bloodGroup">
                        <th class="table-header font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Blood Group </th>
                        <td mat-cell *matCellDef="let row"> {{row.bloodGroup}} </td>
                    </ng-container>

                    <ng-container matColumnDef="status">
                        <th class="font-color-primary" mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                        <td mat-cell *matCellDef="let row">
                            <mat-chip *ngIf="row.status==='Approved'" class="approved-chip">{{row.status}}</mat-chip>
                            <mat-chip *ngIf="row.status==='Pending'" class="pending-chip">{{row.status}}</mat-chip>
                        </td>
                    </ng-container>

                
            
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            
                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
                </tr>
                </table>
            </div>
            
            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
        </div>
          
          <!--<div *ngIf="tutorials">
            <h3>Search Results:</h3>
            <ul>
              <li *ngFor="let result of tutorials">
                {{ result.title }} {{ result.description }} </li>
            </ul>
          </div> -->
    </mat-card-content>
  </mat-card>
